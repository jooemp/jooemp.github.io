{% extends 'dashboard/layout.html' %}
{% load i18n %}
{% load static %}
{% block container %}
<div class="text-center mx-auto mt-4 pb-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active"
             id="home-tab"
             data-toggle="tab"
             href="#home"
             role="tab"
             aria-controls="home"
             aria-selected="true">
             Añadir Peso
          </a>
        </li>
        {% if user.is_staff %}
        <li class="nav-item">
          <a class="nav-link"
             id="profile-tab"
             data-toggle="tab"
             href="#profile"
             role="tab"
             aria-controls="profile"
             aria-selected="false">
             Resultados
          </a>
        </li>
        {% endif %}
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
          <form action="." method="POST" class="card card-sm" style="padding: 2rem;text-align: left;">
            {%csrf_token%}
            {% if user.is_staff or user.is_superuser%}
            <div class="form-group">
              <label for="dateR">Fecha</label>
              <input type="date" step="any" class="form-control" value="{{ fechactual }}" name="dateR" id="dateR">
            </div>
            {% else %}
            <div class="form-group">
              <label for="dateR">Fecha</label>
              <input type="date" step="any" class="form-control" value="{{ fechactual }}" name="dateR" id="dateR" disabled>
            </div>
            {% endif %}
            <div class="form-group">
              <label for="productsA">Producto</label>
              <select class="form-control" name="productsA" id="productsA" required>
                <option selected disabled>Escoge</option>
                {% for type in types %}
                <option value="{{type.0}}">{{ type.1 }}</option>
                {% endfor %}
              </select>            
            </div>
            <div class="form-group">
              <label for="weight">Peso</label>
              <input type="number" step="any" class="form-control" name="weight" id="weight">
            </div>
            <div class="form-group">
              <label for="quantity">Cantidad</label>
              <input type="number" class="form-control" name="quantity" id="quantity" placeholder="Solo para bicicletas">
            </div>
            <div class="form-group">
              <label for="notes">Observaciones</label>
              <textarea class="form-control" name="notes" id="notes" rows="3"></textarea>
            </div>
            <button class="btn btn-primary">Añadir</button>
          </form>
        </div>
        {% if user.is_staff %}  
        <div class="tab-pane fade show p-2" id="profile" role="tabpanel" aria-labelledby="profile-tab">
          <table id="people" class="table table-striped table-bordered dt-responsive" style="width:100%">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Ropas</th>
                <th>Viveres</th>
                <th>Agrícolad</th>
                <th>Juguetes</th>
                <th>Bicicletas</th>
                <th>Cantidad</th>
                <th>Otros</th>
              </tr>
            </thead>
            <tbody>
              {% for a in acumm %}
              <tr>
                <td>{{a.day|date:"SHORT_DATE_FORMAT"}}</td>
                <td>{{a.clothes}}</td>
                <td>{{a.viveres}}</td>
                <td>{{a.agricola}}</td>
                <td>{{a.toys}}</td>
                <td>{{a.bicycle}}</td>
                <td>{{a.bicycle_cant}}</td>
                <td>{{a.others}}</td>
              </tr>
              {% endfor %}
              <tr>
                <td>{{today|date:"SHORT_DATE_FORMAT"}}</td>
                <td>{{ropa}}</td>
                <td>{{vivere}}</td>
                <td>{{agricola}}</td>
                <td>{{juguete}}</td>
                <td>{{bicicleta}}</td>
                <td>{{qbici}}</td>
                <td>{{otro}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <h2>Vamos {{ toneladas2020 }} Kg</h2>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% if user.is_superuser %}  
<div class="bg-white text-center border-top">
  <form action="{% url 'dashboard:close_day' %}" method="POST" class="card card-sm">
    {% csrf_token %}
    <div class="form-group row">
      <label for="quantity" class="col-sm-2 col-form-label">Fecha</label>
      <input type="text" class="col-sm-3 col-form-label" name="dateC" id="dateC">
      <button class="col-sm-3 btn btn-secondary ">
        <i class="fas fa-plus"></i>
        Cerrar Día
      </button>
    </div>
  </form>
</div>
{% endif %}
{% endblock %}
{% block scripts %}
<script src='https://code.jquery.com/jquery-3.3.1.js'></script>
<script src='https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js'></script>
<script src='https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js'></script>
<script src='https://cdn.datatables.net/rowreorder/1.2.6/js/dataTables.rowReorder.min.js'></script>
<script src='https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js'></script>
<script src='https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js'></script>

<script src='https://cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.min.js'></script>
<script src='https://cdn.datatables.net/buttons/1.6.1/js/buttons.flash.min.js'></script>

<script src='https://cdn.datatables.net/buttons/1.6.1/js/buttons.flash.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js'></script>
<script src='https://cdn.datatables.net/buttons/1.6.1/js/buttons.html5.min.js'></script>


{% endblock %}
